# LAB3 REPORT
##　计23 刘鹤　2012011300

### 练习0：填写已有实验
> 在命令行下使用diff和patch命令进行代码整合


### 练习1：给未被映射的地址映射上物理页

- 1 设计实现过程
> * 首先获取一个页表项，若页表项的内容不存在（物理内存不存在），则分配一个页，并对其进行地址映射；若存在，则根据物理地址将磁盘中的页换如内存中，并将页表项中的物理地址映射到内存中的地址。将page设置为可替换的。

- 2 页目录项和页表项的潜在用途
> * 当页表项中的pte_p位为０时，页表项中的地址＋页内偏移可以当作磁盘的扇区地址将页调入内存中；当该位为１时，页表项中的地址＋页内偏移是物理内存中的地址
> * 页表中的引用位和存在位在clock使用替换算法时会用到

- 3 如果ucore的缺页服务例程在执行过程中访问内存，出现了页访问异常，请问硬件要做哪些事情
> * 进行异常现场保护，即保存一些寄存器的值，如eip, cs, eflags等


### 练习２：补充完成基于FIFO的页面替换算法

- 1 设计实现过程
> * 根据FIFO算法，将　_fifo_map_swappable　函数中加上一句话，将最近替换的页加入到队列尾部
> * 在　_fifo_swap_out_victim　寻找要被替换出去的页，将最先替换进的页替换出去，即将链表头head的前一个节点删除掉。

- 2 现有的swap_manager框架是否足以支持在ucore中实现"extended clock"算法？
> * 可以

- 3 需要被换出的页的特征是什么？
> * 访问位为０，　修改位为０

- 4 在ucore中如何判断具有这样特征的页？
> * 从当前指针指向的页面开始遍历，一直到找到符合条件的页面

- 5 何时进行换入和换出操作？
> * 缺页时需要换入；动态分配内存且没有可用空闲页面时换出

### 与参考答案的区别
- 在自己的代码中并未对ptep是否正确获得到进行判断，而参考答案进行了判断（如果未正确获得ptep则报错）

### 本实验中重要的知识点
- FIFO页替换算法、mm struct 和 vma struct以及页缺失异常的处理
